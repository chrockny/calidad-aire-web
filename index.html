<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calidad del Aire en Tiempo Real</title>
    <link rel="stylesheet" href="style.css">

    <!-- Firebase SDK - Compat (para usar firebase.initializeApp y firebase.database) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

    <!-- Chart.js para las gráficas -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header>
        <h1>Monitoreo de Calidad del Aire y Sensores</h1>
    </header>

    <main>
        <!-- Tarjeta con los valores en tiempo real -->
        <section class="data-card">
            <h2>Datos del Sensor</h2>
            <div class="sensor-grid">
                <p>CO2 (MHZ19): <span id="co2Mhz19Value">Cargando...</span> ppm</p>
                <p>CO2 (MQ135): <span id="co2Mq135Value">Cargando...</span> ppm</p>
                <p>PM1.0: <span id="pm1_0Value">Cargando...</span> µg/m³</p>
                <p>PM2.5: <span id="pm2_5Value">Cargando...</span> µg/m³</p>
                <p>PM10: <span id="pm10Value">Cargando...</span> µg/m³</p>
                <p>Temperatura (MHZ19): <span id="tempMhz19Value">Cargando...</span> °C</p>
                <p>Lux: <span id="luxValue">Cargando...</span> lux</p>
                <p>Luz Blanca: <span id="whiteLightValue">Cargando...</span></p>
            </div>

            <p class="timestamp">
                Última actualización: <span id="lastUpdated"></span>
            </p>
        </section>

              <!-- Tarjeta con las gráficas en tiempo real -->
              <section class="charts-card">
                <h2>GRÁFICAS EN TIEMPO REAL</h2>
                <p class="charts-description">
                    Visualización en vivo de las principales variables de calidad de aire. Cada nuevo dato del ESP32 se añade como un punto en la serie.
                </p>
    
                <div class="charts-grid">
                    <div class="chart-container">
                        <h3>CO₂ (MHZ19)</h3>
                        <canvas id="co2MhzChart"></canvas>
                    </div>
    
                    <div class="chart-container">
                        <h3>CO₂ (MQ135)</h3>
                        <canvas id="co2MqChart"></canvas>
                    </div>
    
                    <div class="chart-container">
                        <h3>PM1.0 (µg/m³)</h3>
                        <canvas id="pm1Chart"></canvas>
                    </div>
    
                    <div class="chart-container">
                        <h3>PM2.5 (µg/m³)</h3>
                        <canvas id="pm25Chart"></canvas>
                    </div>
    
                    <div class="chart-container">
                        <h3>PM10 (µg/m³)</h3>
                        <canvas id="pm10Chart"></canvas>
                    </div>
    
                    <div class="chart-container">
                        <h3>Temperatura (°C)</h3>
                        <canvas id="tempChart"></canvas>
                    </div>
    
                    <div class="chart-container">
                        <h3>Lux</h3>
                        <canvas id="luxChart"></canvas>
                    </div>
    
                    <div class="chart-container">
                        <h3>Luz Blanca</h3>
                        <canvas id="whiteLightChart"></canvas>
                    </div>
                </div>
    
                <p class="charts-note">
                    Se muestran los últimos 20 puntos de medición en tiempo real para cada variable.
                </p>
            </section>
    
    </main>

    <!-- Lógica de Firebase, lectura de datos y gráficas -->
    <script src="script.js"></script>
</body>
</html>
